Title: Matlab เก็บ matrix อย่างไร 
Date: 2012-05-30 04:27:47
Tags: matlab 
Slug: Matlab เก็บ matrix อย่างไร 


สมมติมี matrix A แบบนี้
$$A = \left(\begin{array}{ccc}1 &amp; 4 &amp; 7 \\ 2 &amp; 5 &amp; 8 \\ 3 &amp; 6 &amp; 9 \end{array}\right) $$
จริงๆแล้ว Matlab เก็บ A ในรูปแบบของ array 1 มิติ แปลว่าใน memory หน้าตาของ A คือ $$(1,2,3,4,5,6,7,8,9)^T$$ จากข้อมูลนี้ทำให้บางคนบอกว่าการเลือกเก็บข้อมูลตามแนวตั้งหรือแนวนอน อาจมีผลกับเวลาคำนวณ เพราะถ้าเก็บตามแนวตั้งข้อมูลจะเรียงกันอยู่แล้วใน memory ถ้าให้เข้าถึงเร็วถ้าเครื่องทำ cache ไว้ (ลองดูเรื่อง<a href="http://en.wikipedia.org/wiki/Locality_of_reference"> spatial locality</a>) แต่อันนี้จากประสบการณ์ยังไม่เคยเห็นชัดแม้แต่ครั้งเดียว ฉะนั้นไม่ต้องคิดมากจะดีกว่า ใช้แนวไหนก็ใช้ไป

เนื่องจากว่า Matlab เก็บเป็น array 1 มิติ เวลาเราเข้าถึงตำแหน่ง i, j ของ matrix M ด้วย

[matlab]M(i,j)[/matlab]

เลยต้องมีการแปลง i, j ให้เป็น index แบบมิติเดียว เรียกว่า linear indexing วิธีแปลงก็ง่ายๆ สมมติว่าให้ M มีขนาด r x c หรือ

[matlab][r c] = size(M)[/matlab]

Matlab แปลงด้วยสูตรนี้

[matlab] (j-1)*r + i [/matlab]

นั่นแปลว่า

[matlab] M( (j-1)*r + i ) == M(i,j) [/matlab]

นั่นเอง ถึง M มีขนาด 2 มิติแต่ใช้ M(5) แบบนี้ได้ ตามที่อธิบายไปแล้วว่าจริงๆแล้วมันคือ array  1 มิติ (M(5) ได้ 5 ตามนิยามของ A ข้างบน)
