Title: สลับไพ่กี่ทีถึงจะ random 
Date: 2012-05-31 13:13:24
Tags: card, magic, matlab 
Slug: สลับไพ่กี่ทีถึงจะ random 


เชื่อว่าหลายคนคงเคยเล่นไพ่กันมาบ้าง ปกติถ้าเล่นแบบไม่ซีเรียส แบบเล่นที่บ้าน ก่อนเริ่มเล่นก็มักจะสลับไพ่แบบง่ายๆ คืออาจจะทำ <a href="http://52kards.com/hindu-shuffle/">hindu shuffle</a> ซักที 2 ทีก็เริ่มเล่นเกมใหม่แล้ว เคยสงสัยมั้ยว่าทำแค่นั้นมัน random จริงเหรอ? แน่นอนใครๆก็รู้ว่าไม่ random อยู่แล้ว แล้วต้องสลับขนาดไหนถึงจะให้ไพ่มาออกมาดู random ล่ะ? เท่าที่อ่านเจอคือ<a href="http://en.wikipedia.org/wiki/Shuffling">ต้องสลับประมาณ 6 ที</a> เข้าใจว่าเขาคงหมายถึงสลับแบบแบ่งไพ่เป็น 2 กองแล้วพยายามให้ไพ่จาก 2 กองสับหว่างกันให้มากที่สุด (อันนี้เดาเอาเองนะ)

วิธีหนึ่งที่จะสลับแบบนั้นได้คือใช้ <a href="http://www.youtube.com/watch?v=2TyA0CInQH4">faro shuffle</a> ทีนี้เลยอยากรู้ต่อว่าสลับแต่ละครั้งตำแหน่งเปลี่ยนอย่างไร ในหน้าลิงค์ faro shuffle ก็มีเขียนอธิบายด้วย group theory อะไรของเขาอยู่ แต่เนื่องจากเป็นคนไม่ค่อยฉลาดนัก อยากเห็นเป็นเลขตำแหน่งเต็มๆเลยมากกว่า .. เลยลองเช็คด้วยคอมดู

สมมติให้กองไพ่เริ่มต้นมีตำแหน่งเป็น 1, 2, ..., 52 แล้วทำ <a href="http://en.wikipedia.org/wiki/Out_shuffle">out shuffle</a> คือทำ faro shuffle โดยที่ไพ่จาก 2 กองสับหว่างกันทุกใบ (perfect faro shuffle) และไพ่ใบบนกับใบล่างสุดไม่เปลี่ยนตำแหน่ง จริงๆแล้วการสลับแบบ perfect แบบนี้มันไม่น่าจะถือว่าเป็นการ random แล้ว เพราะมัน deterministic จากคำอธิบายเขาบอกว่าถ้าทำ out shuffle 8 ทีจะได้ตำแหน่งเดิมแหละ ต่อไปนี้เป็นตำแหน่งของไพ่เมื่อทำไป 8 ครั้ง (คอลัมน์แรกคือยังไม่ได้ทำอะไร คอลัมน์ที่สองคือทำไป 1 ครั้ง ...)
<pre>     1     1     1     1     1     1     1     1     1
     2    27    14    33    17     9     5     3     2
     3     2    27    14    33    17     9     5     3
     4    28    40    46    49    25    13     7     4
     5     3     2    27    14    33    17     9     5
     6    29    15     8    30    41    21    11     6
     7     4    28    40    46    49    25    13     7
     8    30    41    21    11     6    29    15     8
     9     5     3     2    27    14    33    17     9
    10    31    16    34    43    22    37    19    10
    11     6    29    15     8    30    41    21    11
    12    32    42    47    24    38    45    23    12
    13     7     4    28    40    46    49    25    13
    14    33    17     9     5     3     2    27    14
    15     8    30    41    21    11     6    29    15
    16    34    43    22    37    19    10    31    16
    17     9     5     3     2    27    14    33    17
    18    35    18    35    18    35    18    35    18
    19    10    31    16    34    43    22    37    19
    20    36    44    48    50    51    26    39    20
    21    11     6    29    15     8    30    41    21
    22    37    19    10    31    16    34    43    22
    23    12    32    42    47    24    38    45    23
    24    38    45    23    12    32    42    47    24
    25    13     7     4    28    40    46    49    25
    26    39    20    36    44    48    50    51    26
    27    14    33    17     9     5     3     2    27
    28    40    46    49    25    13     7     4    28
    29    15     8    30    41    21    11     6    29
    30    41    21    11     6    29    15     8    30
    31    16    34    43    22    37    19    10    31
    32    42    47    24    38    45    23    12    32
    33    17     9     5     3     2    27    14    33
    34    43    22    37    19    10    31    16    34
    35    18    35    18    35    18    35    18    35
    36    44    48    50    51    26    39    20    36
    37    19    10    31    16    34    43    22    37
    38    45    23    12    32    42    47    24    38
    39    20    36    44    48    50    51    26    39
    40    46    49    25    13     7     4    28    40
    41    21    11     6    29    15     8    30    41
    42    47    24    38    45    23    12    32    42
    43    22    37    19    10    31    16    34    43
    44    48    50    51    26    39    20    36    44
    45    23    12    32    42    47    24    38    45
    46    49    25    13     7     4    28    40    46
    47    24    38    45    23    12    32    42    47
    48    50    51    26    39    20    36    44    48
    49    25    13     7     4    28    40    46    49
    50    51    26    39    20    36    44    48    50
    51    26    39    20    36    44    48    50    51
    52    52    52    52    52    52    52    52    52</pre>
หรือดูเป็นรูปดีกว่า ให้สีน้ำเงินเป็นตำแหน่งเลขต่ำๆและสีแดงคือตำแหน่งเลขมากๆ แล้วจะได้แบบนี้
<img class="aligncenter size-full wp-image-966" title="8faro" src="http://wittawat.com/blog/wp-content/uploads/2012/05/8faro.png" alt="" width="531" height="597" />

ก็แบบที่เขาบอกคือทำ 8 ครั้งจะได้ตำแหน่งเดิม แต่ที่บอกว่าสลับ 6 ทีแล้วจะ random นี่ไม่เห็น random เลย ต้องไปอ่าน paper เต็มๆถึงจะรู้ว่าให้สลับยังไงแล้ววัดว่า random ยังไง แต่ยังไม่ได้อ่าน

โค้ด Matlab ที่ใช้ทำก็ง่ายๆแบบนี้

[matlab]
C = reshape(1:52, [26, 2]);
n = 8;
Decks = nan(52, n+1);
Decks(:,1) = C(:);
for i=1:8
    C2 = C';
    C = reshape(C2, [26, 2]);
    Decks(:,i+1) = C(:);
end
[/matlab]

รันเสร็จ plot ตัวแปร Decks ด้วย

[matlab]imagesc(Decks)[/matlab]
