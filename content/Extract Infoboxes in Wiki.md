Title: Extract Infoboxes in Wiki 
Date: 2008-04-07 09:59:00
Tags:  
Slug: Extract Infoboxes in Wiki 


ช่วงนี้กำลังพยายามสกัดข้อมูลจาก <a href="http://th.wikipedia.org/">Wikipedia ภาษาไทย</a>เพื่อนำมาใช้ทำ Question Answering System (QAS , ระบบคำถามคำตอบ ,　自動質問応答システム ) สำหรับภาษาไทย<br /><br />เริ่มแรกก็ลองศึกษาวิธีการเขียน Wiki ก่อน อ่านๆไปก็พบว่า syntax มันแปลกดีทีเดียว เช่น ถ้าอยากเขียนตัว A ที่หนาแบบนี้ <span style="font-weight: bold;">A</span> ก็ต้องเขียนใน Wiki ว่า '''A''' (quote 3 อัน) คนทำ Wiki เขามีเหตุผลว่าผู้เขียนจะได้ไม่ต้องมารู้เรื่อง html อะไรมากนัก (จริงเร้อ...?)<br /><br />ปัญหาก็คือ syntax แปลกๆพวกนี้ มันทำให้เราสกัดข้อมูลออกมายากเนื่องจาก ใช้ HTML parser ปกติ parse มันไม่ได้ เราก็เลยไปหาต่อไปก็พบอีกว่า มีคนทำ tool, api ไว้ใช้เล่นกับ Wiki เอาไว้แล้วมากมาย โชคดีไปที่ยังมีอะไรช่วยได้บ้าง<br /><br />ใครเปิด Wiki ดูจะพบว่าหลายๆบทความจะมีตารางสรุปข้อมูลอยู่ทางขวามือ ตารางนี้เรียกว่า Infobox หรือ กล่องข้อมูล กล่องข้อมูลนี้มีประโยชน์ต่อระบบคำถามคำตอบมาก เพราะถ้าสกัดข้อมูลในตารางออกมาได้ จะสามารถนำมาเป็นคำตอบของหลายๆคำถามได้ทันที<br /><br />ช่วงแรกของโปรเจคระบบคำถามคำตอบนี้ เราก็จะพยายามสกัดข้อมูลที่อยู่ในทุกๆกล่องข้อมูลออกมาก่อน แต่มันปัญหาเยอะเหลือเกิน T_T ลองเล่นพวก tool ที่คนเขาทำไว้แล้วก็ไม่ค่อยถูกใจซักอัน ใครมี algorithm หรือ library อะไรที่ทำได้ มาบอกกันมั่งนะ....<br /><br />ตอนนี้ทนไม่ไหวกับ tool แล้ว ก็เลยลองพยายามจะสกัดข้อมูลโดยเขียนโปรแกรมเอง อันดับแรกไม่รู้จะทำไง เลยพยายามจะแกะส่วนที่เป็นกล่องข้อมูลออกมาจากบทความทั้งหน้าให้ได้ก่อน ซึ่งหลังจากที่ลองเขียน NFA  (switch case + state ที่เป็น int) เองเพื่อแกะกล่องข้อมูลแล้วพบว่าไม่ work  ก็เลยกำลังเขียน RE เพื่อแกะดู<br /><br />RE ของกล่องข้อมูล ที่เขียนเอง (หาใน net ไม่เจอแฮะ ทั้งๆที่น่าจะมี)เป็นแบบนี้:<br /><br />\\{\\{.+?(\\s*\\|\\s*[\\w\\p{L}\\p{M}]+\\s*=((\\{\\{)?+.*?)(\\}\\})?+)+\\s*(\\|\\s*)?\\}\\}<br /><br />อือ... match ได้หลายหน้าเหมือนกัน แต่บางหน้าก็ยังติดอยู่ เดี๋ยวต้องค่อยๆทำต่อไป....
