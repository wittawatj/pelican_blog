Title: Order of Notification to EventListener's 
Date: 2008-04-28 09:08:00
Tags:  
Slug: Order of Notification to EventListener's 


EventListener เป็นสิ่งที่ใช้บ่อยในการเขียน GUI ใน Java วันนี้นั่งหา bug อีกแล้ว ครั้งนี้เป็น bug ที่รู้ว่าอยู่ไหน แต่ไม่รู้ว่าทำไม เรื่องคือ เราต้องเขียนโปรแกรมลักษณะหนึ่งซึ่ง semantic ของโปรแกรมขึ้นอยู่กับลำดับของการถูกรายงาน (notify) ของ event<br /><br />รู้อยู่แล้วว่าการทำแบบนี้เป็นสิ่งไม่ควรทำ เพราะ semantic ของ โปรแกรมไม่ควรขึ้นอยู่กับลำดับการถูก notify ของ event เราควรจะถือว่า listener ทุกๆอัน ถูก notify พร้อมๆกัน แต่ด้วยความที่เคยอ่านมาว่า listener ที่ถูก add หลังสุดจะถูก notify ก่อน บวกกับความขี้เกียจเขียนอะไรแก้ให้ยุ่งยาก ก็เลยเขียนโปรแกรมไม่ดีอย่างที่กล่าวไป....<br /><br />และแล้วหลังจากที่หา bug มานาน ก็พบว่า JFrame ที่ใช้อยู่มัน notify WindowListener เป็นลำดับตามที่ add เข้าไป แปลว่า listener ไหนถูก add ก่อนก็ถูก notify ก่อน ซึ่งไม่เหมือนอย่างที่อ่านมา นี่แหละทำให้หา bug ไม่เจอซักที ต่อไป<span style="font-weight: bold;">ต้องไม่เขียนโปรแกรมที่ขึ้นกับลำดับของ EventListener นะ</span>
