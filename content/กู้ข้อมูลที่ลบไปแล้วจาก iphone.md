Title: กู้ข้อมูลที่ลบไปแล้วจาก iphone 
Date: 2009-06-07 16:01:22
Tags: data recovery, iphone 
Slug: กู้ข้อมูลที่ลบไปแล้วจาก iphone 


<span style="color: #ff0000;"><strong>UPDATE: บทความนี้ เขียนใหม่แบบละเอียดสามารถดูได้<a title="กู้ข้อมูลที่ลบไปแล้วจาก iphone โดยใช้ Ubuntu" href="http://wittawat.com/blog/?p=306">ที่นี่</a></strong></span>

เมื่อวันก่อนมีเหตุที่ต้องกู้ข้อมูลที่ลบไปแล้วจาก iphone คืนมา หาไปหลายเว็บได้วิธีมาดังนี้ (เท่าที่จำได้นะ) จริงๆแล้ววิธีนี้เข้าใจว่าน่าจะใช้ได้กับ harddisk ทั่วไปด้วยเพราะเป็นวิธีที่ชาวบ้านเขาใช้กันมานานแล้ว
<ol>
	<li>เปิด terminal ใน iphone</li>
	<li>เข้าเป็น root โดย คำสั่ง[bash]su[/bash]</li>
	<li>ทำการคัดลอกข้อมูลทั้งหมดใน disk ของ iphone ออกมา การคัดลอกนี้ไม่ใช่ copy ทุกไฟล์ แต่เราจะต้องคัดลอกทุกส่วนทุกมุมของ disk เลยเพื่อจะได้เอามาวิเคราะห์ทีหลังว่าส่วนไหนมุมไหนของ disk มีร่องรอยไฟล์เหลืออยู่บ้าง การทำแบบนี้มีข้อดีคือเรามีโอกาสกู้ไฟล์คืนมาได้แม้ format ไปแล้ว (น่าจะเฉพาะ format แบบ quick) แน่นอนว่าเราไม่สามารถคัดลอกไปใส่ disk เดิมได้ เพราะการคัดลอกนี้เราจะได้ไฟล์ 1 ไฟล์ซึ่งมีขนาดเท่า disk เดิมเลย เป็น raw image ของ disk นั่นเอง ฉะนั้นเราต้องคัดลอกไปที่อื่น โดยใช้คำสั่งนี้ (สมมติว่าอีกเครื่องชื่อ otherhost มี user ชื่อ hoho)
[bash]dd if=/dev/disk0 | ssh hoho@otherhost 'dd of=/some/path/disk.img'[/bash]

กด enter มันจะถาม password login ใส่ไปเสร็จแล้วมันจะเริ่มคัดลอกเนื้อหาทั้ง disk ผ่าน network ไปอีกเครื่องหนึ่งซึ่งใช้เวลานานมาก หากทำกับ iphone ให้เสียบปลั๊กให้พร้อม เตรียมเนื้อที่ของอีกเครื่องหนึ่งให้พร้อมด้วย เมื่อทำเสร็จจะได้ไฟล์ image ประมาณ 8 GB ของ iphone ที่ผมใช้ อยู่ที่ /some/path/disk.img</li>
	<li>ใช้โปรแกรมชื่อ photorec เพื่ออ่านไฟล์ image ที่ได้ โดยใช้คำสั่งนี้ (เป็น root ด้วยนะ)
[bash]photorec  /some/path/disk.img[/bash]

กด enter ปุ๊บจะเห็น UI เป็น menu ให้เลือกๆได้ ค่อนข้าง friendly เราสามรถเลือกประเภทของไฟล์ที่ต้องการจะให้มันหาได้ด้วย แต่ปกติมันจะค้นทุกไฟล์ที่มันรู้ให้อยู่แล้ว พอรันเสร็จจะได้ไฟล์เยอะแยะเต็มไปหมดในโหลเดอร์ที่เราเลือกไว้ ขั้นตอนนี้ทำงานค่อนข้างเร็วนั่งรอได้เลย ไม่กี่นาทีบน image 8 GB</li>
</ol>
มีเว็บ photorec แสดงวิธีเป็นขั้นตอนให้ด้วย <a href="http://www.cgsecurity.org/wiki/PhotoRec_Step_By_Step">http://www.cgsecurity.org/wiki/PhotoRec_Step_By_Step</a>

เพิ่มเติม
<ul>
	<li><a title="กู้ข้อมูลที่ลบไปแล้วจาก iphone โดยใช้ Ubuntu" href="http://wittawat.com/blog/?p=306">กู้ข้อมูลที่ลบไปแล้วจาก iphone สำหรับ Linux</a></li>
</ul>
[ad#afterpost]
